<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
<style>
#box1{
    display: flex;
    flex-wrap: wrap;
    font-size: 20px;
    width: 99%;
}
.divbox{
    display: flex;
    flex-wrap: wrap;
    font-size: 20px;
    width: 99%;
}
#txt{
    width: 99%;
    border: 1px solid red;
}
.word_span{
    padding: 5px;
    font-size: 20px;
}
.my_input{
    font-size: 20px;
    padding: 5px;
    margin-bottom: 15px;
}
</style>

<div id="box1"></div>



<br><br>



<textarea id="txt">const newInput document createElement
const div2 document createElement
</textarea>


<script>
var num = 1
var divbox_num = 1
var box1 = document.getElementById("box1")


function create_div(){
    divbox_num = divbox_num + 1
    divbox_id = `divbox${divbox_num}`
    const div  = document.createElement("div")    
    div.setAttribute("id",divbox_id)
    div.setAttribute("class", "divbox")
    box1.appendChild(div);
}



function create_input(){
    const div  = document.createElement("div")    
    const div2 = document.createElement("div")

    num = num + 1
    new_id = `input${num}`
    const newInput = document.createElement("input")
    newInput.setAttribute("type" ,"text")
    newInput.setAttribute("id",new_id)
    newInput.setAttribute("class", "my_input")

    divbox_id = `divbox${divbox_num}`
    const mybox = document.getElementById(divbox_id)

    mybox.appendChild(div);
    mybox.appendChild(newInput);    
    mybox.appendChild(div2);
}


// 插入單字
function create_word(word){
    const newWord = document.createElement("span");
    newWord.setAttribute("class" ,"word_span")
    newWord.innerHTML = word

    divbox_id = `divbox${divbox_num}`
    const mybox = document.getElementById(divbox_id)
    mybox.appendChild(newWord);
}


function get_txt(){
    let data = document.getElementById("txt").value;
    data.split("\n").forEach(line => {
        line = line.replaceAll(".","").replaceAll("  "," ").replaceAll("  "," ").replaceAll("  "," ").replaceAll("  "," ").replaceAll("  "," ")
        console.log(line)

        if( line !== ""){
        // 建立 div
        create_div();

        // 插入單字
        line.split(" ").forEach(word => { create_word(word) })
        create_input();
        }
    });
}

const mytxt = document.getElementById("txt")
mytxt.addEventListener("change",(event)=>{
    box1.innerHTML=""
    get_txt()
})



</script>


</body>
</html>